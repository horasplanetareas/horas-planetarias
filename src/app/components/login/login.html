<div class="auth-container">
  <h2>{{ mode === 'login' ? 'Iniciar Sesión' : 'Registrarse' }}</h2>
  
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div *ngIf="mode === 'register'">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="ejemplo@dominio.com"
        title="Ingrese su email"
      />
      <div *ngIf="form.controls.email.invalid && form.controls.email.touched" class="error">
        Email inválido
      </div>
    </div>

    <label for="username">Usuario</label>
    <input
      id="username"
      type="text"
      formControlName="username"
      placeholder="Ingrese su usuario"
      title="Nombre de usuario"
    />
    <div *ngIf="form.controls.username.invalid && form.controls.username.touched" class="error">
      Usuario requerido
    </div>

    <label for="password">Contraseña</label>
    <input
      id="password"
      type="password"
      formControlName="password"
      placeholder="Mínimo 6 caracteres"
      title="Ingrese su contraseña"
    />
    <div *ngIf="form.controls.password.invalid && form.controls.password.touched" class="error">
      Contraseña requerida (mínimo 6 caracteres)
    </div>

    <button type="submit" [disabled]="form.invalid">
      {{ mode === 'login' ? 'Ingresar' : 'Registrar' }}
    </button>
  </form>

  <div *ngIf="mode === 'register' && codeSent" class="code-confirm">
    <p>Código enviado a {{ form.value.email }}: <strong>{{ sentCode }}</strong></p>
    <label for="codeInput">Ingresá el código</label>
    <input
      id="codeInput"
      [(ngModel)]="inputCode"
      placeholder="Código de confirmación"
      title="Código de confirmación"
    />
    <button (click)="confirmCode()">Confirmar</button>
    <p *ngIf="codeError" class="error">Código incorrecto</p>
  </div>

  <p>
    <a [routerLink]="mode === 'login' ? '/register' : '/login'">
      {{ mode === 'login' ? 'Crear cuenta' : 'Ya tengo cuenta' }}
    </a>
  </p>
</div>
